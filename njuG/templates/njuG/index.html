{% extends "base.html" %}
{% load staticfiles %}
{% block loadCss %}
<link rel="stylesheet" type="text/css" href="{% static "css/index.css" %}">
{% endblock %}

{% block content %}
<div class="ui grid">
	<div class="row">
		<div class="twelve wide column">
			<div class="ui form">
				<form method="post" action="/njuG/post" id="postForm">
					{% csrf_token %}
				  <div class="field">
				    <label>说点儿什么吧...</label>
				    <textarea id="postArea" name="content" rows="2" class="poststate" placeholder="What's on you mind" required=></textarea>
				  </div>
				  <button class="ui labeled icon blue basic button" type="submit" id="postButton">
	  				<i class="send icon"></i>
	  				就这样吧
				  </button>
				  <button class="ui labeled icon teal basic button">
				  	<i class="file image outline icon"></i>
					添加图片
				  </button>
			    </form>
			</div>
			<div class="ui divider"></div>
			
			<div class="ui large feed">
				{% for post in posts %}
				<div class="event">
					<div class="label">
						<img src="{% static "img/avatar/small/elliot.jpg" %}">
					</div>
					<div class="content">
						<div class="summary">
							{{ post.user.username }} posted on his page
							<div class="date">
								{{ post.time }}
							</div>
						</div>
						<div class="extra text">
							{{ post.content }}
						</div>
						<div class="meta">
							<a class="like" postid="{{ post.id }}">
								{% if post.id in likedPosts %}
								<i class="like icon liked"></i> <i class="likeCount">{{post.likes}}</i> Likes
								{% else %}						
								<i class="like icon"></i> <i class="likeCount">{{post.likes}}</i> Likes
								{% endif %}
							</a>
						</div>
						{% for comment in post.comments %}
						<div class="comment">
							<div class="label" ><img class="ui avatar image" src="{% static "img/avatar/small/elliot.jpg" %}"></div>
							<div class="commentContent"> <span>{{ comment.content }}</span></div>
							<div class="date">
								{{ comment.time }}
							</div>
							
						</div>						
						{% endfor %}
						<div class="commentInput">
							<img class="ui avatar image" src="{% static "img/avatar/small/elliot.jpg" %}">
							<form class="ui form commentForm" >
							<div class="ui action input">
							  <input type="text" name="commentContent" placeholder="评论..." required>
							  <button class="ui icon button" type="submit" postid="{{ post.id }}">
							    <i class="send icon"></i>
							  </button>
							</div>
							</form>
						</div>
					</div>
				</div>
				{% endfor %}
			</div>
			
			<!-- <div class="ui large feed">
				  <div class="event">
				    <div class="label">
				      <img src="/images/avatar/small/elliot.jpg">
				    </div>
				    <div class="content">
				      <div class="summary">
				        <a class="user">
				          Elliot Fu
				        </a> added you as a friend
				        <div class="date">
				          1 Hour Ago
				        </div>
				      </div>
				      <div class="meta">
				        <a class="like">
				          <i class="like icon"></i> 4 Likes
				        </a>
				      </div>
				    </div>
				  </div>
				  <div class="event">
				    <div class="label">
				      <i class="pencil icon ui avatar image"></i>
				    </div>
				    <div class="content">
				      <div class="summary">
				        You submitted a new post to the page
				        <div class="date">
				          3 days ago
				        </div>
				      </div>
				      <div class="extra text">
				        I'm having a BBQ this weekend. Come by around 4pm if you can.
				      </div>
				      <div class="meta">
				        <a class="like">
				          <i class="like icon"></i> 11 Likes
				        </a>
				      </div>
				    </div>
				  </div>
				  <div class="event">
				    <div class="label">
				      <img src="/images/avatar/small/helen.jpg">
				    </div>
				    <div class="content">
				      <div class="date">
				        4 days ago
				      </div>
				      <div class="summary">
				        <a>Helen Troy</a> added <a>2 new illustrations</a>
				      </div>
				      <div class="extra images">
				        <a><img src="/images/wireframe/image.png"></a>
				        <a><img src="/images/wireframe/image.png"></a>
				      </div>
				      <div class="meta">
				        <a class="like">
				          <i class="like icon"></i> 1 Like
				        </a>
				      </div>
				    </div>
				  </div>
				  <div class="event">
				    <div class="label">
				      <img src="/images/avatar/small/jenny.jpg">
				    </div>
				    <div class="content">
				      <div class="summary">
				        <a class="user">
				          Jenny Hess
				        </a> added you as a friend
				        <div class="date">
				          2 Days Ago
				        </div>
				      </div>
				      <div class="meta">
				        <a class="like">
				          <i class="like icon"></i> 8 Likes
				        </a>
				      </div>
				    </div>
				  </div>
				  <div class="event">
				    <div class="label">
				      <img src="/images/avatar/small/joe.jpg">
				    </div>
				    <div class="content">
				      <div class="summary">
				        <a>Joe Henderson</a> posted on his page
				        <div class="date">
				          3 days ago
				        </div>
				      </div>
				      <div class="extra text">
				        Ours is a life of constant reruns. We're always circling back to where we'd we started, then starting all over again. Even if we don't run extra laps that day, we surely will come back for more of the same another day soon.
				      </div>
				      <div class="meta">
				        <a class="like">
				          <i class="like icon"></i> 5 Likes
				        </a>
				      </div>
				    </div>
				  </div>
				  <div class="event">
				    <div class="label">
				      <img src="/images/avatar/small/justen.jpg">
				    </div>
				    <div class="content">
				      <div class="date">
				        4 days ago
				      </div>
				      <div class="summary">
				        <a>Justen Kitsune</a> added <a>2 new photos</a> of you
				      </div>
				      <div class="extra images">
				        <a><img src="/images/wireframe/image.png"></a>
				        <a><img src="/images/wireframe/image.png"></a>
				      </div>
				      <div class="meta">
				        <a class="like">
				          <i class="like icon"></i> 41 Likes
				        </a>
				      </div>
				    </div>
				  </div>
				</div> -->
			
		</div>
		<div class="four wide column">
			
		</div>
	</div>	
</div>

{% endblock %}

{% block loadJs %}
<script src="{% static "js/createEvent.js" %}"></script>

<!-- The jQuery UI widget factory, can be omitted if jQuery UI is already included -->
<script src="{% static "jquery/jQuery-file-upload/js/vendor/jquery.ui.widget.js" %}"></script>
<!-- The Templates plugin is included to render the upload/download listings -->
<script src="{% static "jquery/jQuery-file-upload/js/tmpl.min.js" %}"></script>
<!-- The Load Image plugin is included for the preview images and image resizing functionality -->
<script src="{% static "jquery/jQuery-file-upload/js/load-image.min.js" %}"></script>
<!-- The Canvas to Blob plugin is included for image resizing functionality -->
<script src="{% static "jquery/jQuery-file-upload/js/canvas-to-blob.min.js" %}"></script>
<!-- Bootstrap JS is not required, but included for the responsive demo navigation -->

<!-- blueimp Gallery script -->
<script src="{% static "jquery/jQuery-file-upload/js/jquery.blueimp-gallery.min.js" %}"></script>
<!-- The Iframe Transport is required for browsers without support for XHR file uploads -->
<script src="{% static "jquery/jQuery-file-upload/js/jquery.iframe-transport.js" %}"></script>
<!-- The basic File Upload plugin -->
<script src="{% static "jquery/jQuery-file-upload/js/jquery.fileupload.js" %}"></script>
<!-- The File Upload processing plugin -->
<script src="{% static "jquery/jQuery-file-upload/js/jquery.fileupload-process.js" %}"></script>
<!-- The File Upload image preview & resize plugin -->
<script src="{% static "jquery/jQuery-file-upload/js/jquery.fileupload-image.js" %}"></script>
<!-- The File Upload audio preview plugin -->
<script src="{% static "jquery/jQuery-file-upload/js/jquery.fileupload-audio.js" %}"></script>
<!-- The File Upload video preview plugin -->
<script src="{% static "jquery/jQuery-file-upload/js/jquery.fileupload-video.js" %}"></script>
<!-- The File Upload validation plugin -->
<script src="{% static "jquery/jQuery-file-upload/js/jquery.fileupload-validate.js" %}"></script>
<!-- The File Upload user interface plugin -->
<script src="{% static "jquery/jQuery-file-upload/js/jquery.fileupload-ui.js" %}"></script>
<!-- The main application script -->
<script src="{% static "jquery/jQuery-file-upload/js/main.js" %}"></script>
<script src="{% static "jquery/jQuery-file-upload/js/locale.js" %}"></script>
<script src="{% static "jquery/jQuery-file-upload/js/csrf.js" %}"></script>
{% endblock %}

